# Set of queries to fetch historical prices for various time ranges.
#
# While GraphQL would support executing all data fetches in a single query,
# some tables have considerably more data which prevents the client from
# transforming data until all queries are done.
#

query hourlyTokenPrices($address: String, $chainId: Int!, $periodStartUnix: Int) {
  tokenHourDatas(
    chainId: $chainId
    first: 1000
    where: { token: $address, periodStartUnix_gt: $periodStartUnix }
    orderBy: periodStartUnix
    orderDirection: desc
    subgraphError: allow
  ) {
    id
    timestamp: periodStartUnix
    high
    low
    open
    close
  }
}

query dailyTokenPrices($address: String, $chainId: Int!) {
  tokenDayDatas(
    chainId: $chainId
    first: 1000
    where: { token: $address }
    orderBy: date
    orderDirection: desc
    subgraphError: allow
  ) {
    id
    timestamp: date
    high
    low
    open
    close
  }
}
